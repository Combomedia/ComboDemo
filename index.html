<!DOCTYPE html>
<html lang="es">
<head>
    <!-- ... (código existente sin cambios) ... -->
</head>
<body>
    <div class="container">
        <header>
            <!-- ... (código existente sin cambios) ... -->
        </header>
        
        <div class="content">
            <div class="instructions">
                <h3>Instrucciones:</h3>
                <p>Por favor complete todos los campos del formulario. Los campos marcados con asterisco (*) son obligatorios.</p>
            </div>
            
            <div class="form-container">
                <form id="formVendedor">
                    <h2 class="section-title">Datos Personales</h2>
                    <table>
                        <tr>
                            <td>
                                <label for="nombre">Nombre *</label>
                                <input type="text" id="nombre" required>
                            </td>
                            <td>
                                <label for="apellido">Apellido *</label>
                                <input type="text" id="apellido" required>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="cedula">Cédula *</label>
                                <input type="text" id="cedula" placeholder="Ej: 12345678" required>
                            </td>
                            <td>
                                <label for="telefono">Teléfono *</label>
                                <input type="tel" id="telefono" placeholder="Ej: 04121234567" required>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="correo">Correo Electrónico *</label>
                                <input type="email" id="correo" placeholder="Ej: nombre@ejemplo.com" required>
                            </td>
                            <td>
                                <label for="fecha_nac">Fecha de Nacimiento *</label>
                                <input type="date" id="fecha_nac" required>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label>Sexo *</label>
                                <div class="radio-group">
                                    <label><input type="radio" name="sexo" value="Masculino" required> Masculino</label>
                                    <label><input type="radio" name="sexo" value="Femenino"> Femenino</label>
                                </div>
                            </td>
                            <td>
                                <label for="interes">Interés *</label>
                                <select id="interes" required onchange="mostrarCamposAdicionales()">
                                    <option value="">Seleccione una opción</option>
                                    <option value="Comuna">Comuna</option>
                                    <option value="Fundacion">Fundación</option>
                                </select>
                            </td>
                        </tr>
                    </table>

                    <!-- Campo Comuna (solo visible si se selecciona Comuna) -->
                    <div id="seccionComuna" style="display: none;">
                        <h2 class="section-title">Datos de Comuna</h2>
                        <table>
                            <tr>
                                <td>
                                    <label for="comuna">Comuna *</label>
                                    <select id="comuna" onchange="mostrarResidencias()">
                                        <option value="">Seleccione una comuna</option>
                                        <option value="Parque Central">Parque Central</option>
                                    </select>
                                </td>
                                <td>
                                    <label for="residencia">Residencia *</label>
                                    <select id="residencia" onchange="mostrarAptos()" style="display: none;">
                                        <option value="">Seleccione una residencia</option>
                                        <option value="Tejar">Tejar</option>
                                        <option value="San Martin">San Martin</option>
                                        <option value="Mohedano">Mohedano</option>
                                        <option value="Anauco">Anauco</option>
                                        <option value="Tajama">Tajama</option>
                                        <option value="Catuche">Catuche</option>
                                        <option value="Caroata">Caroata</option>
                                        <option value="Tacagua">Tacagua</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label for="apto">Apto *</label>
                                    <select id="apto" style="display: none;">
                                        <option value="">Seleccione un apto</option>
                                        <!-- Las opciones se cargarán dinámicamente -->
                                    </select>
                                </td>
                                <td></td>
                            </tr>
                        </table>
                    </div>

                    <!-- Campo Fundaciones (solo visible si se selecciona Fundación) -->
                    <div id="seccionFundaciones" style="display: none;">
                        <h2 class="section-title">Datos de Fundación</h2>
                        <table>
                            <tr>
                                <td>
                                    <label for="fundaciones">Fundaciones *</label>
                                    <select id="fundaciones">
                                        <option value="">Seleccione una fundación</option>
                                        <option value="Misión Ribas">Misión Ribas</option>
                                        <option value="Fundación Causa Campesina">Fundación Causa Campesina</option>
                                        <option value="Observatorio Popular de medios">Observatorio Popular de medios</option>
                                    </select>
                                </td>
                                <td></td>
                            </tr>
                        </table>
                    </div>
                    
                    <div class="btn-container">
                        <button type="submit">Enviar Datos</button>
                    </div>
                </form>
            </div>
            
            <div class="footer">
                <p>Sistema de Registro de Vendedores &copy; 2023 - Empresa Agua Pura</p>
                <p>Los datos se guardan automáticamente en nuestra base de datos</p>
            </div>
        </div>
    </div>
    
    <!-- Modal (código existente sin cambios) ... -->

    <script>
        // Función para mostrar campos adicionales según interés seleccionado
        function mostrarCamposAdicionales() {
            const interes = document.getElementById('interes').value;
            const seccionComuna = document.getElementById('seccionComuna');
            const seccionFundaciones = document.getElementById('seccionFundaciones');
            
            seccionComuna.style.display = (interes === 'Comuna') ? 'block' : 'none';
            seccionFundaciones.style.display = (interes === 'Fundacion') ? 'block' : 'none';
            
            // Resetear valores al cambiar
            if (interes !== 'Comuna') {
                document.getElementById('comuna').value = '';
                document.getElementById('residencia').value = '';
                document.getElementById('apto').value = '';
                document.getElementById('residencia').style.display = 'none';
                document.getElementById('apto').style.display = 'none';
            }
            if (interes !== 'Fundacion') {
                document.getElementById('fundaciones').value = '';
            }
        }
        
        // Función para mostrar residencias cuando se selecciona comuna
        function mostrarResidencias() {
            const comuna = document.getElementById('comuna').value;
            const residencia = document.getElementById('residencia');
            
            residencia.style.display = (comuna === 'Parque Central') ? 'block' : 'none';
            if (comuna !== 'Parque Central') {
                residencia.value = '';
                document.getElementById('apto').value = '';
                document.getElementById('apto').style.display = 'none';
            }
        }
        
        // Función para mostrar aptos según residencia seleccionada
        function mostrarAptos() {
            const residencia = document.getElementById('residencia').value;
            const aptoSelect = document.getElementById('apto');
            
            if (!residencia) {
                aptoSelect.style.display = 'none';
                return;
            }
            
            // Generar opciones de apto (primeras 10 opciones)
            aptoSelect.innerHTML = '<option value="">Seleccione un apto</option>';
            const aptos = [
                '01A', '01B', '01C', '01D', '01E', 
                '01F', '01G', '01H', '01J', '01K'
            ];
            
            aptos.forEach(apto => {
                const option = document.createElement('option');
                option.value = apto;
                option.textContent = apto;
                aptoSelect.appendChild(option);
            });
            
            aptoSelect.style.display = 'block';
        }

        // Función para validar formulario (actualizada)
        function validarFormulario() {
            // ... (validaciones existentes de cédula, teléfono, etc.) ...
            
            // Validar campos condicionales
            const interes = document.getElementById('interes').value;
            if (interes === 'Comuna') {
                if (!document.getElementById('comuna').value) {
                    showModal('Error', 'Por favor seleccione una comuna', false, true);
                    return false;
                }
                if (!document.getElementById('residencia').value) {
                    showModal('Error', 'Por favor seleccione una residencia', false, true);
                    return false;
                }
                if (!document.getElementById('apto').value) {
                    showModal('Error', 'Por favor seleccione un apto', false, true);
                    return false;
                }
            } else if (interes === 'Fundacion') {
                if (!document.getElementById('fundaciones').value) {
                    showModal('Error', 'Por favor seleccione una fundación', false, true);
                    return false;
                }
            }
            
            return true;
        }
        
        // Función para enviar datos (actualizada)
        function enviarDatosGoogleSheets() {
            const scriptURL = 'https://script.google.com/macros/s/AKfycbxsknB45qUKhUe86VQ-4w7A9eLyz1u9HewrG-OWJfTJuF6j4WlhKvaFNUF_An4EKgY3/exec';
            const formData = new FormData();
            
            // Campos básicos
            formData.append('nombre', document.getElementById('nombre').value);
            formData.append('apellido', document.getElementById('apellido').value);
            formData.append('cedula', document.getElementById('cedula').value);
            formData.append('telefono', document.getElementById('telefono').value);
            formData.append('correo', document.getElementById('correo').value);
            formData.append('fecha_nac', document.getElementById('fecha_nac').value);
            formData.append('sexo', document.querySelector('input[name="sexo"]:checked').value);
            
            // Campos condicionales
            const interes = document.getElementById('interes').value;
            formData.append('interes', interes);
            
            if (interes === 'Comuna') {
                formData.append('comuna', document.getElementById('comuna').value);
                formData.append('residencia', document.getElementById('residencia').value);
                formData.append('apto', document.getElementById('apto').value);
            } else if (interes === 'Fundacion') {
                formData.append('fundaciones', document.getElementById('fundaciones').value);
            }
            
            // ... (resto del código de envío) ...
        }
        
        // Inicialización (actualizada)
        document.addEventListener('DOMContentLoaded', function() {
            const hoy = new Date().toISOString().split('T')[0];
            const fechaNac = new Date();
            fechaNac.setFullYear(fechaNac.getFullYear() - 25);
            document.getElementById('fecha_nac').value = fechaNac.toISOString().split('T')[0];
            
            // Configurar listeners para campos dinámicos
            document.getElementById('interes').addEventListener('change', mostrarCamposAdicionales);
            document.getElementById('comuna').addEventListener('change', mostrarResidencias);
            document.getElementById('residencia').addEventListener('change', mostrarAptos);
        });
    </script>
</body>
</html>
